---
import Layout from './Layout.astro'
import GoogleAd from '../components/GoogleAd.astro'

const { blog = { data: { title: '', description: '', image: undefined, tags: [] } } } = Astro.props

const pageTitle = blog.data.title.substring(0, 60)
const pageImage = blog.data.image?.url || ''
const pageDescription = blog.data.description.substring(0, 180) + (blog.data.description.length > 180 ? '...' : '')
const website = new URL(Astro.url.pathname, Astro.site).toString()
---

<Layout title={pageTitle} description={pageDescription} image={pageImage} keyword={blog.data.tags.join(',')} website={website}>
  <div class="container py-4">
    <article class="markdown">
      <h1>{blog.data.title}</h1>
      <p>{blog.data.description}</p>
      {
        import.meta.env.PUBLIC_ADSENSE_BLOG_SLOT && (
          <div class="my-3 print:hidden">
            <GoogleAd slot={import.meta.env.PUBLIC_ADSENSE_BLOG_SLOT} layout="in-article" format="fluid" />
          </div>
        )
      }
      <slot />
    </article>
  </div>
</Layout>
