---
date: 2025-01-19
title: '‡∏õ‡∏¥‡∏î DHCP ‡∏ö‡∏ô macOS ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô (‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏á‡πÑ‡∏õ‡∏ï‡∏£‡∏á‡∏°‡∏≤)'
description: '‡∏ñ‡πâ‡∏≤‡∏£‡∏±‡∏ô DHCP server ‡πÅ‡∏•‡πâ‡∏ß‡∏ä‡∏ô‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏õ‡∏•‡∏Å ‡πÜ ‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏¥‡∏î‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ DHCP ‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏°‡∏≤‡∏Å‡∏±‡∏ö macOS ‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡∏™‡∏≠‡∏ô‡∏õ‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå bootpd.plist ‡πÅ‡∏ö‡∏ö‡∏Å‡∏£‡∏∞‡∏ä‡∏±‡∏ö'
author: 'Kananek T.'
image:
  url: '/cover/disabling-dhcp.webp'
  src: '../../../public/cover/disabling-dhcp.webp'
tags: ['macOS', 'DHCP', 'networking', 'thai']
---

## ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ß‡∏•‡∏≤ DHCP ‡∏ä‡∏ô‡∏Å‡∏±‡∏ô

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á error ‡∏≠‡∏≤‡∏à‡∏Ç‡∏∂‡πâ‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ô‡∏µ‡πâ:

```
Error: control/dhcp/set_config
enabling dhcp: starting dhcp server: dhcpv4:
creating ipv4 udp connection: cannot bind to port 67: address already in use
```

‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏≠‡∏µ‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏ã‡∏™‡∏à‡∏±‡∏ö‡∏û‡∏≠‡∏£‡πå‡∏ï 67 ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß (‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á DHCP)

---

## ‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏¥‡∏î DHCP ‡∏ö‡∏ô macOS

### 1. ‡πÄ‡∏ä‡πá‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡πÉ‡∏Ñ‡∏£‡πÉ‡∏ä‡πâ‡∏û‡∏≠‡∏£‡πå‡∏ï 67

‡∏£‡∏±‡∏ô:

```bash
sudo lsof -i :67
```

‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏ö‡∏ô macOS ‡∏ñ‡πâ‡∏≤‡πÄ‡∏´‡πá‡∏ô `bootpd` ‡∏´‡∏£‡∏∑‡∏≠ `bootpd` ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå COMMAND / NAME ‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ DHCP/BOOTP ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà

‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠‡∏≠‡∏∞‡πÑ‡∏£ (‡πÑ‡∏°‡πà‡∏°‡∏µ output) ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ï‡πà‡∏≠‡∏Å‡πá‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏ß‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß

‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡∏≠‡πÄ‡∏õ‡πá‡∏ô service ‡∏≠‡∏∑‡πà‡∏ô (‡πÄ‡∏ä‡πà‡∏ô docker, process ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏≠‡∏á) ‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡πâ‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏∏‡πà‡∏á‡∏Å‡∏±‡∏ö `bootpd`

---

### 2. (‡∏ñ‡πâ‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô bootpd) ‡πÅ‡∏Å‡πâ‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤

‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå `bootpd.plist`:

```bash
sudo nano /etc/bootpd.plist
```

### 3. ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå

- ‡∏õ‡∏¥‡∏î DHCP: ‡∏´‡∏≤ `<key>dhcp_enabled</key>` ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤‡∏°‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô `<array/>`

```xml
<key>dhcp_enabled</key>
<array/>
```

- ‡∏•‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏¥‡∏î‡∏™‡πà‡∏ß‡∏ô Subnets: ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ `<key>Subnets</key>` ‡∏à‡∏∞‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏≠‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏ö `<dict>` ‡∏ó‡∏±‡πâ‡∏á‡∏Å‡πâ‡∏≠‡∏ô‡πÑ‡∏î‡πâ
- ‡∏õ‡∏¥‡∏î BOOTP: ‡πÉ‡∏´‡πâ `<key>bootp_enabled</key>` ‡πÄ‡∏õ‡πá‡∏ô `false`

```xml
<key>bootp_enabled</key>
<false/>
```

### 4. ‡πÄ‡∏ã‡∏ü‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡∏≠‡∏Å

‡∏Å‡∏î `Ctrl + O` (‡πÅ‡∏•‡πâ‡∏ß Enter) ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô `Ctrl + X`

---

### 5. ‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó / ‡∏õ‡∏¥‡∏î‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ bootpd

```bash
sudo launchctl stop com.apple.bootpd
sudo launchctl unload /System/Library/LaunchDaemons/bootps.plist
```

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ bootpd ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏à‡∏±‡∏ö‡∏û‡∏≠‡∏£‡πå‡∏ï 67

### 6. ‡∏ï‡∏£‡∏ß‡∏à‡∏ã‡πâ‡∏≥

```bash
sudo lsof -i :67
```

‡∏ñ‡πâ‡∏≤‡πÄ‡∏á‡∏µ‡∏¢‡∏ö ‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤‡∏õ‡∏¥‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÄ‡∏à‡∏≠ ‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏ã‡∏™‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏¢‡∏∏‡∏î (‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ô‡∏ã‡πâ‡∏≥ / ‡∏£‡∏µ‡∏ö‡∏π‡∏ï‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡∏≤‡∏á‡∏Å‡∏£‡∏ì‡∏µ)

---

## ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (Troubleshooting)

### ‡∏¢‡∏±‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÇ‡∏î‡∏ô‡πÉ‡∏ä‡πâ?

- ‡∏î‡∏π‡∏ß‡πà‡∏≤‡πÉ‡∏Ñ‡∏£‡∏à‡∏±‡∏ö‡∏û‡∏≠‡∏£‡πå‡∏ï:
  ```bash
  sudo lsof -i :67
  ```
- ‡∏¢‡∏¥‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏ã‡∏™‡∏ô‡∏±‡πâ‡∏ô (‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏î‡πâ‡∏ß‡∏¢):
  ```bash
  sudo kill -9 <PID>
  ```

### ‡∏≠‡∏¢‡∏≤‡∏Å‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°

‡∏ñ‡πâ‡∏≤‡∏û‡∏±‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏¢‡∏≤‡∏Å‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° (‡∏Ñ‡∏ß‡∏£ backup ‡∏Å‡πà‡∏≠‡∏ô):

```bash
sudo cp /etc/bootpd.plist /etc/bootpd.plist.bak
sudo defaults write /etc/bootpd.plist ""
```

---

‡∏õ‡∏¥‡∏î DHCP ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Å‡πá‡πÑ‡∏°‡πà‡∏ä‡∏ô‡∏û‡∏≠‡∏£‡πå‡∏ï 67 ‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∞‡πÑ‡∏õ‡∏£‡∏±‡∏ô DHCP server ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô‡∏Å‡πá‡πÇ‡∏•‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô üëç
